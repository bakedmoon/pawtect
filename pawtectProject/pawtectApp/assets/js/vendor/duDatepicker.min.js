/* -- DO NOT REMOVE --
 * jQuery duDatePicker v1.2 plugin
 * https://github.com/dmuy/duDatepicker
 *
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 *
 * @requires jQuery
 * -- DO NOT REMOVE --
 */
if("undefined"==typeof jQuery)throw new Error("duDatePicker: This plugin requires jQuery");+function(e){Date.prototype.getDaysCount=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};var a=["January","February","March","April","May","June","July","August","September","October","November","December"],t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r="<span>"+n.map(function(e){return e.substr(0,2)}).join("</span><span>")+"</span>",s=[9,112,113,114,115,116,117,118,119,120,121,122,123],i="_duDatepicker",l="D, mmm d",p="mmmm yyyy",o=function(a,t){var d=this;d.animating=!1,d.visible=!1,d.input=e(a),d.config=t,d.viewMode="calendar",d.datepicker={container:e('<div class="dcalendarpicker"></div>'),wrapper:e('<div class="dudp__wrapper"></div>'),header:{wrapper:e('<section class="dudp__calendar-header"></section>'),selectedYear:e('<span class="dudp__sel-year"></span>'),selectedDate:e('<span class="dcp_sel-date"></span>')},calendarHolder:{wrapper:e('<section class="dudp__cal-container"></section>'),btnPrev:e('<span class="dudp__btn-cal-prev">&lsaquo;</span>'),btnNext:e('<span class="dudp__btn-cal-next">&rsaquo;</span>'),calendarViews:{wrapper:e('<div class="dudp__calendar-views"></div>'),calendars:[]},yearsView:e('<div class="dudp__years-view dp__hidden"></div>'),monthsView:e('<div class="dudp__months-view dp__hidden"></div>'),buttons:{wrapper:e('<div class="dudp__buttons"></div>'),btnClear:e('<span class="dudp__button clear">Clear</span>'),btnCancel:e('<span class="dudp__button cancel">Cancel</span>'),btnOk:e('<span class="dudp__button ok">Ok</span>')}}},d.date=""===d.input.val()?new Date:d.parseDate(d.input.val()).date,d.selected={year:d.date.getFullYear(),month:d.date.getMonth(),date:d.date.getDate()},d.viewMonth=d.selected.month,d.viewYear=d.selected.year,d.minDate=d.input.data("mindate")||d.config.minDate,d.maxDate=d.input.data("maxdate")||d.config.maxDate,d.rangeFromEl=d.input.data("rangefrom")||d.config.rangeFrom,d.rangeToEl=d.input.data("rangeto")||d.config.rangeTo,d.setupPicker(),d.setSelection()};o.prototype={constructor:o,setupPicker:function(){var a=this,d=a.datepicker,n=d.header,r=d.calendarHolder,i=r.buttons;n.wrapper.append(n.selectedYear).append(n.selectedDate).appendTo(d.wrapper);for(var l=0,p=1;4>p;p++){for(var o=e('<div class="dudp__month-row"></div>'),c=0;4>c;c++){var u=e('<span class="dudp__month"></span>');l===a.selected.month&&u.addClass("selected"),u.text(t[l]).data("month",l).appendTo(o).on("click",function(){var t=e(this),d=t.data("month");a.viewMonth=d,a.setupCalendar(),a.switchView("calendar")}),l++}r.monthsView.append(o)}switch(r.yearsView.html(a.getYears()),a.config.clearBtn&&i.wrapper.append(i.btnClear),a.config.cancelBtn&&i.wrapper.append(i.btnCancel),a.config.auto||i.wrapper.append(i.btnOk),r.wrapper.append(r.btnPrev).append(r.btnNext).append(r.calendarViews.wrapper).append(r.monthsView).append(r.yearsView).append(i.wrapper).appendTo(d.wrapper),d.container.append(d.wrapper).appendTo("body"),a.config.theme){case"red":case"blue":case"green":case"purple":case"indigo":case"teal":d.wrapper.attr("data-theme",a.config.theme);break;default:d.wrapper.attr("data-theme",e.fn.duDatepicker.defaults.theme)}a.input.on("click",function(){a.show()}).on("keydown",function(e){return 13===e.keyCode&&a.show(),!(s.indexOf(e.which)<0)}).prop("readonly",!0),n.selectedYear.click(function(){"years"!==a.viewMode&&a.switchView("years")}),n.selectedDate.click(function(){a.viewMonth===a.selected.month&&a.viewYear===a.selected.year&&"calendar"===a.viewMode||(a.viewMonth=a.selected.month,a.viewYear=a.selected.year,a.setupCalendar(),a.switchView("calendar"))}),r.btnPrev.click(function(){a.move("prev")}),r.btnNext.click(function(){a.move("next")}),r.calendarViews.wrapper.on("click",".dudp__cal-month-year",function(){"months"!==a.viewMode&&a.switchView("months")}),a.config.clearBtn&&i.btnClear.click(function(){var t=new Date;a.date=t,a.input.val("").attr("value",""),a.triggerChange(e.Event("datechanged",{date:null})),a.hide()}),a.config.overlayClose&&(d.container.click(function(){a.hide()}),d.wrapper.click(function(e){e.stopPropagation()})),a.config.cancelBtn&&i.btnCancel.click(function(){a.hide()}),i.btnOk.click(function(){var e=new Date(a.selected.year,a.selected.month,a.selected.date);a.disabledDate(e)||(a.date=e,a.setValue(a.date),a.hide())})},getDates:function(a,t){for(var d=this,n=1,r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=new Date(d.selected.year,d.selected.month,d.selected.date),l=new Date(a,t,n),p=l.getDaysCount(),o=1,c=[],u=1;6>=u;u++){for(var h=[e('<span class="dudp__date"></span>'),e('<span class="dudp__date"></span>'),e('<span class="dudp__date"></span>'),e('<span class="dudp__date"></span>'),e('<span class="dudp__date"></span>'),e('<span class="dudp__date"></span>'),e('<span class="dudp__date"></span>')];p>=n;){l.setDate(n);var m=l.getDay();if(h[m].data("date",n).data("month",t).data("year",a),l.getTime()===s.getTime()&&h[m].addClass("current"),d.disabledDate(l)&&h[m].addClass("disabled"),1===u&&0===m)break;if(!(6>m)){l.getTime()===i.getTime()&&h[m].addClass("selected"),h[m].text(n++);break}l.getTime()===i.getTime()&&h[m].addClass("selected"),h[m].text(n++)}if(1===u||u>4)if(1===u)for(var v=new Date(a,t-1,1),f=v.getDaysCount(),_=6;_>=0;_--)""===h[_].text()&&(h[_].data("date",f).data("month",t-1).data("year",a),v.setDate(f),h[_].text(f--).addClass("dudp__pm"),d.disabledDate(v)&&h[_].addClass("disabled"),v.getTime()===i.getTime()&&h[_].addClass("selected"),v.getTime()===s.getTime()&&h[_].addClass("current"));else if(u>4)for(var w=new Date(a,t+1,1),_=0;6>=_;_++)""===h[_].text()&&(h[_].data("date",o).data("month",t+1).data("year",a),w.setDate(o),h[_].text(o++).addClass("dudp__nm"),d.disabledDate(w)&&h[_].addClass("disabled"),w.getTime()===i.getTime()&&h[_].addClass("selected"),w.getTime()===s.getTime()&&h[_].addClass("current"));c.push(h)}var g=[];return e.each(c,function(a,t){for(var n=e('<div class="dudp__cal-week"></div>'),r=0;r<t.length;r++){var s=t[r];s.click(function(){var a=e(this),t=a.data("year"),n=a.data("month"),r=a.data("date"),s=new Date(t,n,r);d.disabledDate(s)||(a.parents(".dudp__calendar-views").find(".dudp__date").each(function(a,d){var s=e(d).data("year"),i=e(d).data("month"),l=e(d).data("date");e(d)[t===s&&n===i&&r===l?"addClass":"removeClass"]("selected")}),a.parents(".dudp__cal-container").find(".dudp__month").each(function(a,t){var d=e(t).data("month");e(t)[d===n?"addClass":"removeClass"]("selected")}),a.addClass("selected"),d.selected={year:t,month:n,date:r},d.setSelection(),d.config.auto&&(d.date=s,d.setValue(d.date),d.hide()))}),n.append(s)}g.push(n)}),g},getYears:function(){for(var a=this,t=a.viewYear-100,d=a.viewYear+100,n=[],r=t;d>=r;r++){var s=e('<span class="dudp__year"></span>');r===a.viewYear&&s.addClass("selected"),s.text(r).data("year",r).on("click",function(){var t=e(this),d=t.data("year");a.viewYear=d,a.selected.year=d,a.setSelection(),a.setupCalendar(),a.switchView("calendar")}),n.push(s)}return n},setupCalendar:function(){var a=this,t=a.datepicker.calendarHolder.calendarViews,d=a.viewYear,n=a.viewMonth;t.calendars.length=0;var s={wrapper:e('<div class="dudp__calendar"></div>'),header:e('<div class="dudp__cal-month-year"></div>'),weekDays:e('<div class="dudp__weekdays">'+r+"</div>"),datesHolder:e('<div class="dudp__dates-holder"></div>')},i={wrapper:e('<div class="dudp__calendar"></div>'),header:e('<div class="dudp__cal-month-year"></div>'),weekDays:e('<div class="dudp__weekdays">'+r+"</div>"),datesHolder:e('<div class="dudp__dates-holder"></div>')},l={wrapper:e('<div class="dudp__calendar"></div>'),header:e('<div class="dudp__cal-month-year"></div>'),weekDays:e('<div class="dudp__weekdays">'+r+"</div>"),datesHolder:e('<div class="dudp__dates-holder"></div>')};i.header.text(a.formatDate(new Date(d,n-1,1),p)).appendTo(i.wrapper),i.wrapper.append(i.weekDays),i.datesHolder.html(a.getDates(d,n-1)).appendTo(i.wrapper),t.calendars.push(i),s.header.text(a.formatDate(new Date(d,n,1),p)).appendTo(s.wrapper),s.wrapper.append(s.weekDays),s.datesHolder.html(a.getDates(d,n)).appendTo(s.wrapper),t.calendars.push(s),l.header.text(a.formatDate(new Date(d,n+1,1),p)).appendTo(l.wrapper),l.wrapper.append(l.weekDays),l.datesHolder.html(a.getDates(d,n+1)).appendTo(l.wrapper),t.calendars.push(l),t.wrapper.empty().append(i.wrapper).append(s.wrapper).append(l.wrapper)},move:function(a){if(("next"===a||"prev"===a)&&!this.animating){var t=this,d=t.datepicker,n=d.calendarHolder.calendarViews,s=250,i="next"===a;(i?t.viewMonth+1>11:t.viewMonth-1<0)&&(t.viewYear+=i?1:-1),t.viewMonth=i?t.viewMonth+1>11?0:t.viewMonth+1:t.viewMonth-1<0?11:t.viewMonth-1,t.animating=!0;var l="dp__animate-"+(i?"left":"right");n.wrapper.find(".dudp__calendar").addClass(l);var o=t.viewYear,c=i?t.viewMonth+1:t.viewMonth-1;(i?c>11:0>c)&&(c=i?0:11,o+=i?1:-1);var u=t.getDates(o,c),h={wrapper:e('<div class="dudp__calendar"></div>'),header:e('<div class="dudp__cal-month-year"></div>'),weekDays:e('<div class="dudp__weekdays">'+r+"</div>"),datesHolder:e('<div class="dudp__dates-holder"></div>')};h.header.text(t.formatDate(new Date(o,c,1),p)).appendTo(h.wrapper),h.wrapper.append(h.weekDays),h.datesHolder.html(u).appendTo(h.wrapper),setTimeout(function(){n.wrapper[i?"append":"prepend"](h.wrapper),n.wrapper.find(".dudp__calendar").removeClass(l),n.calendars[i?0:2].wrapper.remove(),n.calendars[i?"shift":"pop"](),n.calendars[i?"push":"unshift"](h),t.animating=!1},s)}},switchView:function(e){if("calendar"===e||"months"===e||"years"===e){var a=this,t=a.datepicker,d=t.calendarHolder.monthsView,n=t.calendarHolder.yearsView,r=t.calendarHolder.calendarViews.wrapper,s=250;switch(a.viewMode=e,e){case"calendar":r.addClass("dp__animate-out").removeClass("dp__hidden"),t.calendarHolder.btnPrev.removeClass("dp__hidden"),t.calendarHolder.btnNext.removeClass("dp__hidden"),setTimeout(function(){r.removeClass("dp__animate-out")},10),d.addClass("dp__animate-out"),n.addClass("dp__hidden"),setTimeout(function(){d.addClass("dp__hidden").removeClass("dp__animate-out")},s);break;case"months":t.calendarHolder.btnPrev.addClass("dp__hidden"),t.calendarHolder.btnNext.addClass("dp__hidden"),r.addClass("dp__animate-out"),d.addClass("dp__animate-out").removeClass("dp__hidden"),setTimeout(function(){d.removeClass("dp__animate-out")},10),setTimeout(function(){r.addClass("dp__hidden").removeClass("dp__animate-out")},s);break;case"years":n.html(a.getYears());var i=n.find(".dudp__year.selected");n.scrollTop(i[0].offsetTop-120),t.calendarHolder.btnPrev.addClass("dp__hidden"),t.calendarHolder.btnNext.addClass("dp__hidden"),d.addClass("dp__animate-out"),r.addClass("dp__animate-out"),n.removeClass("dp__hidden"),setTimeout(function(){r.addClass("dp__hidden").removeClass("dp__animate-out"),d.addClass("dp__hidden").removeClass("dp__animate-out")},s)}}},resetSelection:function(){var a=this;a.selected={year:a.date.getFullYear(),month:a.date.getMonth(),date:a.date.getDate()},a.viewYear=a.selected.year,a.viewMonth=a.selected.month,a.datepicker.calendarHolder.monthsView.find(".dudp__month").each(function(t,d){var n=e(d).data("month");e(d)[n===a.selected.month?"addClass":"removeClass"]("selected")})},setSelection:function(){var e=this,a=e.datepicker,t=new Date(e.selected.year,e.selected.month,e.selected.date);a.header.selectedYear.text(t.getFullYear()),a.header.selectedDate.text(e.formatDate(t,l))},setValue:function(a){if("undefined"==typeof a)throw new Error("Expecting a value.");var t="string"==typeof a?this.parseDate(a,this.config.format).date:a,d=this.formatDate(t,this.config.format);console.log("set value"),console.log(typeof a),console.log(t),this.date=t,this.viewYear=t.getFullYear(),this.viewMonth=t.getMonth(),this.input.val(d).attr("value",d),this.triggerChange(e.Event("datechanged",{date:this.formatDate(this.date,this.config.outFormat||this.config.format)}))},triggerChange:function(e){this.input.trigger(e).trigger("onchange").trigger("change")},parseDate:function(t,d){var n=this,r="undefined"==typeof d?n.config.format:d,s=(r.match(/d/g)||[]).length,i=(r.match(/m/g)||[]).length,l=(r.match(/y/g)||[]).length,p=4===i,o=1===i,c=1===s,u=t.length,h=r.indexOf("m"),m=r.indexOf("d"),v=r.indexOf("y"),f="",_="",w="";if(""===t)return{m:null,d:null,y:null,date:new Date("")};if(p){var g=-1;e.each(a,function(e,a){t.indexOf(a)>=0&&(g=e)}),f=a[g],r=r.replace("mmmm",f),m=r.indexOf("d"),v=h>v?r.indexOf("y"):r.indexOf("y",r.indexOf(f)+f.length)}else if(!c&&!o||c&&!o&&m>h)f=t.substr(h,i);else{var y=r.lastIndexOf("m"),D=r.substring(h-1,h),b=r.substring(y+1,y+2);f=y===r.length-1?t.substring(t.indexOf(D,h-1)+1,u):0===h?t.substring(0,t.indexOf(b,h)):t.substring(t.indexOf(D,h-1)+1,t.indexOf(b,h+1))}if(!c&&!o||!c&&o&&h>m)_=t.substr(m,s);else{var C=r.lastIndexOf("d"),D=r.substring(m-1,m),b=r.substring(C+1,C+2);_=C===r.length-1?t.substring(t.indexOf(D,m-1)+1,u):0===m?t.substring(0,t.indexOf(b,m)):t.substring(t.indexOf(D,m-1)+1,t.indexOf(b,m+1))}return!o&&!c||o&&c&&h>v&&m>v||!o&&c&&m>v||o&&!c&&h>v?w=t.substr(v,l):(D=r.substring(v-1,v),w=t.substr(t.indexOf(D,v-1)+1,l)),{m:f,d:_,y:w,date:isNaN(parseInt(f))?new Date(f+" "+_+", "+w):new Date(w,f-1,_)}},formatDate:function(e,r){var s=new Date(e),i=s.getDate(),l=s.getMonth(),p=s.getFullYear();return r.replace(/(yyyy|yy|mmmm|mmm|mm|m|DD|D|dd|d)/g,function(e){switch(e){case"d":return i;case"dd":return 10>i?"0"+i:i;case"D":return n[s.getDay()];case"DD":return d[s.getDay()];case"m":return l+1;case"mm":return 10>l+1?"0"+(l+1):l+1;case"mmm":return t[l];case"mmmm":return a[l];case"yy":return p.toString().substr(2,2);case"yyyy":return p}})},disabledDate:function(a){var t=this,r=null,s=null,l=null,p=null,o=null,c=null,u=new Date,h=new Date(u.getFullYear(),u.getMonth(),u.getDate()),m=t.config.disabledDates,v=t.config.disabledDays,f=m.filter(function(e){return e.indexOf("-")>=0?a>=t.parseDate(e.split("-")[0]).date&&a<=t.parseDate(e.split("-")[1]).date:t.parseDate(e).date.getTime()===a.getTime()}).length>0,_=v.indexOf(d[a.getDay()])>=0||v.indexOf(n[a.getDay()])>=0||v.indexOf(n.map(function(e){return e.substr(0,2)})[a.getDay()])>=0;if(t.minDate&&(o="today"===t.minDate?h:new Date(t.minDate)),t.maxDate&&(c="today"===t.maxDate?h:new Date(t.maxDate)),t.rangeFromEl){var w=e(t.rangeFromEl),g=w.data(i),y=g.config.format,D=w.val();r=t.parseDate(D,y).date,l="today"===g.minDate?h:new Date(g.minDate)}if(t.rangeToEl){var b=e(t.rangeToEl),C=b.data(i),k=C.config.format,x=b.val();s=t.parseDate(x,k).date,p="today"===C.maxDate?h:new Date(C.maxDate)}return o&&o>a||c&&a>c||r&&r>a||s&&a>s||l&&l>a||p&&a>p||f||_},show:function(){var a=this;e("body").attr("datepicker-display","on"),a.resetSelection(),a.setSelection(),a.setupCalendar(),a.datepicker.container.addClass("dp__open"),a.visible=!0,a.input.blur()},hide:function(){var a=this;a.datepicker.container.addClass("dp__closing"),a.switchView("calendar"),a.visible=!1,a.input.focus(),e("body").removeAttr("datepicker-display"),setTimeout(function(){a.datepicker.container.removeClass("dp__closing dp__open")},200)},destroy:function(){var e=this;e.input.removeData(i).unbind("keydown").unbind("click").removeProp("readonly"),e.datepicker.container.remove()}},e.fn.duDatepicker=function(a){return e(this).each(function(){var t=this,d=e(this),n=e(this).data(i),r=e.extend({},e.fn.duDatepicker.defaults,d.data(),"object"==typeof a&&a);n||d.data(i,n=new o(t,r)),"string"==typeof a&&n[a](),e(document).on("keydown",function(e){27===e.keyCode&&n.visible&&n.hide()})})},e.fn.duDatepicker.defaults={format:"mm/dd/yyyy",outFormat:null,theme:"blue",auto:!1,clearBtn:!1,cancelBtn:!1,overlayClose:!0,disabledDates:[],disabledDays:[]}}(jQuery);